{"version":3,"sources":["./src/app/pages/user/login/login.component.html","./src/app/pages/user/login/login.component.less","./src/app/pages/user/login/login.component.ts","./src/app/pages/user/user-routing.module.ts","./src/app/pages/user/user.module.ts","./src/app/service/login/login.service.ts"],"names":[],"mappings":"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","file":"user-user-module-es2015.js","sourcesContent":["export default \"<div class=\\\"login-wrap\\\">\\r\\n  <div class=\\\"ms-login\\\">\\r\\n    <span class=\\\"login_title\\\">后台管理系统</span>\\r\\n    <form\\r\\n      nz-form\\r\\n      [formGroup]=\\\"validateForm\\\"\\r\\n      class=\\\"login-form\\\"\\r\\n      (ngSubmit)=\\\"submitForm()\\\"\\r\\n    >\\r\\n      <nz-form-item>\\r\\n        <nz-form-control nzHasFeedback nzErrorTip=\\\"Please input your username!\\\">\\r\\n          <nz-input-group nzPrefixIcon=\\\"user\\\">\\r\\n            <input\\r\\n              type=\\\"text\\\"\\r\\n              nz-input\\r\\n              formControlName=\\\"userName\\\"\\r\\n              placeholder=\\\"Username\\\"\\r\\n            />\\r\\n          </nz-input-group>\\r\\n        </nz-form-control>\\r\\n      </nz-form-item>\\r\\n      <nz-form-item>\\r\\n        <nz-form-control nzHasFeedback nzErrorTip=\\\"Please input your Password!\\\">\\r\\n          <nz-input-group nzPrefixIcon=\\\"lock\\\">\\r\\n            <input\\r\\n              type=\\\"password\\\"\\r\\n              nz-input\\r\\n              formControlName=\\\"password\\\"\\r\\n              placeholder=\\\"Password\\\"\\r\\n            />\\r\\n          </nz-input-group>\\r\\n        </nz-form-control>\\r\\n      </nz-form-item>\\r\\n      <nz-form-item>\\r\\n        <nz-form-control>\\r\\n          <label nz-checkbox formControlName=\\\"remember\\\">\\r\\n            <span>Remember me</span>\\r\\n          </label>\\r\\n\\r\\n          <button nz-button  (click)=\\\"resetForm($event)\\\" class=\\\"login-form-forgot\\\" [nzType]=\\\"'dashed'\\\">\\r\\n            Reset\\r\\n          </button>\\r\\n          <button nz-button class=\\\"login-form-button\\\" [nzType]=\\\"'primary'\\\">\\r\\n            Log in\\r\\n          </button>\\r\\n        </nz-form-control>\\r\\n      </nz-form-item>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \".login-wrap {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  background-image: url('login.png');\\n  background-size: cover;\\n}\\n.login-wrap .ms-login {\\n  position: absolute;\\n  left: 50%;\\n  top: 50%;\\n  padding: 0 25px;\\n  width: 350px;\\n  min-height: 300px;\\n  margin-left: -175px;\\n  margin-top: -175px;\\n  border-radius: 5px;\\n  background: rgba(255, 255, 255, 0.5);\\n  overflow: hidden;\\n}\\n.login-wrap .ms-login .login_title {\\n  display: block;\\n  padding-left: 0;\\n  width: 100%;\\n  text-align: center;\\n  height: 50px;\\n  line-height: 50px;\\n  font-size: 24px;\\n  color: #fff;\\n  border-bottom: 1px solid #FFF;\\n}\\n.login-form {\\n  margin-top: 10px;\\n  max-width: 300px;\\n}\\n.login-form-forgot {\\n  float: right;\\n}\\n.login-form-button {\\n  width: 100%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdXNlci9sb2dpbi9EOi9naXRodWIvRkxNX2FkbWluL3NyYy9hcHAvcGFnZXMvdXNlci9sb2dpbi9sb2dpbi5jb21wb25lbnQubGVzcyIsInNyYy9hcHAvcGFnZXMvdXNlci9sb2dpbi9sb2dpbi5jb21wb25lbnQubGVzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxrQ0FBQTtFQUNBLHNCQUFBO0FDQ0Y7QUROQTtFQU9JLGtCQUFBO0VBQ0EsU0FBQTtFQUNBLFFBQUE7RUFDQSxlQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0Esb0NBQUE7RUFDQSxnQkFBQTtBQ0VKO0FEbkJBO0VBbUJNLGNBQUE7RUFDQSxlQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtFQUNBLFdBQUE7RUFDQSw2QkFBQTtBQ0dOO0FES0E7RUFDRSxnQkFBQTtFQUNBLGdCQUFBO0FDSEY7QURNQTtFQUNFLFlBQUE7QUNKRjtBRE9BO0VBQ0UsV0FBQTtBQ0xGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvdXNlci9sb2dpbi9sb2dpbi5jb21wb25lbnQubGVzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sb2dpbi13cmFwIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltYWdlcy9sb2dpbi5wbmcpO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAubXMtbG9naW57XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0b3A6IDUwJTtcbiAgICBwYWRkaW5nOjAgMjVweDtcbiAgICB3aWR0aDogMzUwcHg7XG4gICAgbWluLWhlaWdodDogMzAwcHg7XG4gICAgbWFyZ2luLWxlZnQ6IC0xNzVweDtcbiAgICBtYXJnaW4tdG9wOiAtMTc1cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwwLjUpO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgLmxvZ2luX3RpdGxle1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICBwYWRkaW5nLWxlZnQ6IDA7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIGhlaWdodDogNTBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiA1MHB4O1xuICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0ZGRjtcbiAgICAgXG4gICAgfVxuICB9XG4gIFxufVxuXG5cbi5sb2dpbi1mb3JtIHtcbiAgbWFyZ2luLXRvcDogMTBweDtcbiAgbWF4LXdpZHRoOiAzMDBweDtcbn1cblxuLmxvZ2luLWZvcm0tZm9yZ290IHtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuXG4ubG9naW4tZm9ybS1idXR0b24ge1xuICB3aWR0aDogMTAwJTtcbn0iLCIubG9naW4td3JhcCB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvbG9naW4ucG5nKTtcbiAgYmFja2dyb3VuZC1zaXplOiBjb3Zlcjtcbn1cbi5sb2dpbi13cmFwIC5tcy1sb2dpbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogNTAlO1xuICB0b3A6IDUwJTtcbiAgcGFkZGluZzogMCAyNXB4O1xuICB3aWR0aDogMzUwcHg7XG4gIG1pbi1oZWlnaHQ6IDMwMHB4O1xuICBtYXJnaW4tbGVmdDogLTE3NXB4O1xuICBtYXJnaW4tdG9wOiAtMTc1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpO1xuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuLmxvZ2luLXdyYXAgLm1zLWxvZ2luIC5sb2dpbl90aXRsZSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBwYWRkaW5nLWxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGhlaWdodDogNTBweDtcbiAgbGluZS1oZWlnaHQ6IDUwcHg7XG4gIGZvbnQtc2l6ZTogMjRweDtcbiAgY29sb3I6ICNmZmY7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRkZGO1xufVxuLmxvZ2luLWZvcm0ge1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBtYXgtd2lkdGg6IDMwMHB4O1xufVxuLmxvZ2luLWZvcm0tZm9yZ290IHtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuLmxvZ2luLWZvcm0tYnV0dG9uIHtcbiAgd2lkdGg6IDEwMCU7XG59XG4iXX0= */\"","import { OnInit, Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AuthService } from 'src/app/core/auth/auth.service';\r\nimport { LoginService } from 'src/app/service/login/login.service';\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.less']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  validateForm: FormGroup;\r\n  returnUrl: string;\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private authService: AuthService,\r\n    private loginService: LoginService,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {\r\n    if (authService.currentUserValue) {\r\n      // console.log('自动进入首页');\r\n      // this.router.navigate([this.returnUrl]);\r\n    }\r\n  }\r\n  submitForm(): void {\r\n    for (const i in this.validateForm.controls) {\r\n      if (i) {\r\n        this.validateForm.controls[i].markAsDirty();\r\n        this.validateForm.controls[i].updateValueAndValidity();\r\n      }\r\n    }\r\n    const data = this.validateForm.value;\r\n    if (data.userName && data.password) {\r\n      this.authService.login(data.userName, data.password);\r\n      this.router.navigate([this.returnUrl]);\r\n    }\r\n  }\r\n  resetForm(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    this.validateForm.reset();\r\n    for (const key in this.validateForm.controls) {\r\n      if (key) {\r\n        this.validateForm.controls[key].markAsPristine();\r\n        this.validateForm.controls[key].updateValueAndValidity();\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.validateForm = this.fb.group({\r\n      userName: [null, [Validators.required]],\r\n      password: [null, [Validators.required]],\r\n      remember: [true]\r\n    });\r\n    this.returnUrl =\r\n      this.route.snapshot.queryParams.returnUrl || '/';\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginComponent } from './login/login.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    redirectTo: 'login',\r\n    pathMatch: 'full'\r\n  },\r\n  {\r\n    path: 'login',\r\n    component: LoginComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UserRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\n// 接收可以使用Nfif, Ngfor\r\nimport { CommonModule } from '@angular/common';\r\n// 导入路由\r\nimport { UserRoutingModule } from './user-routing.module';\r\n// 导入子组件/\r\nimport { LoginComponent } from './login/login.component';\r\n// 注册反应式表单模块\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\n// ----------第三方插件---------\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\n\r\n\r\n@NgModule(\r\n    {\r\n        declarations: [\r\n            // 导入子组件/\r\n            LoginComponent\r\n        ],\r\n        imports: [\r\n            // 注册反应式表单模块\r\n            ReactiveFormsModule,\r\n            // 接收可以使用Nfif, Ngfor\r\n            CommonModule,\r\n            // 导入ng-zorro-antd模块\r\n            NgZorroAntdModule],\r\n        exports: [\r\n            // 当前路由信息\r\n            UserRoutingModule,\r\n        ]\r\n    }\r\n)\r\nexport class UserModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { UserInfo } from 'src/app/core/auth/models/auth-info';\r\n\r\n@Injectable({ providedIn: 'root' })\r\n\r\nexport class LoginService {\r\n    constructor(private http: HttpClient) { }\r\n\r\n    login(username: string, password: string) {\r\n        const url = `/account/login`;\r\n        return this.http.post<UserInfo>(url, {\r\n            username,\r\n            password\r\n        });\r\n    }\r\n\r\n    logout() {\r\n        const url = `/account/logout`;\r\n        return this.http.get(url);\r\n    }\r\n}\r\n"],"sourceRoot":"webpack:///"}