{"version":3,"sources":["src/app/pages/Myuser/Avatar/Avatar.component.html","src/app/pages/Myuser/Avatar/Avatar.component.less","src/app/pages/Myuser/Avatar/Avatar.component.ts","src/app/pages/Myuser/Myuser-routing.module.ts","src/app/pages/Myuser/Myuser.module.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<app-breadcrumb></app-breadcrumb>\\r\\n<div>\\r\\n  <!-- <div class=\\\"avaimg\\\">\\r\\n    <img [src]=\\\"avatarUrl\\\" alt=\\\"\\\" sizes=\\\"\\\" srcset=\\\"\\\" />\\r\\n  </div> -->\\r\\n\\r\\n  <!-- <div>\\r\\n    选择文件(可多选):\\r\\n    <input type=\\\"file\\\" id=\\\"f1\\\" multiple /><br /><br />\\r\\n    <button type=\\\"button\\\" id=\\\"btn-submit\\\">上 传</button>\\r\\n  </div> -->\\r\\n\\r\\n  <nz-upload\\r\\n    class=\\\"avatar-uploader\\\"\\r\\n    nzAction=\\\"https://jsonplaceholder.typicode.com/posts/\\\"\\r\\n    nzName=\\\"avatar\\\"\\r\\n    nzListType=\\\"picture-card\\\"\\r\\n    [nzShowUploadList]=\\\"false\\\"\\r\\n    [nzBeforeUpload]=\\\"beforeUpload\\\"\\r\\n    (nzChange)=\\\"handleChange($event)\\\"\\r\\n  >\\r\\n    <ng-container *ngIf=\\\"!avatarUrl\\\">\\r\\n      <i\\r\\n        class=\\\"upload-icon\\\"\\r\\n        nz-icon\\r\\n        [nzType]=\\\"loading ? 'loading' : 'plus'\\\"\\r\\n      ></i>\\r\\n      <div class=\\\"ant-upload-text\\\">Upload</div>\\r\\n    </ng-container>\\r\\n    <img *ngIf=\\\"avatarUrl\\\" [src]=\\\"avatarUrl\\\" class=\\\"avatar\\\" />\\r\\n  </nz-upload>\\r\\n</div>\\r\\n\"","export default \".avaimg {\\n  margin: 50px;\\n  width: 150px;\\n  height: 150px;\\n}\\n.avaimg img {\\n  border-radius: 50%;\\n  width: 100%;\\n  height: 100%;\\n}\\n.avatar {\\n  width: 128px;\\n  height: 128px;\\n}\\n.upload-icon {\\n  font-size: 32px;\\n  color: #999;\\n}\\n.ant-upload-text {\\n  margin-top: 8px;\\n  color: #666;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvTXl1c2VyL0F2YXRhci9EOi9naXRodWIvRkxNX2FkbWluL3NyYy9hcHAvcGFnZXMvTXl1c2VyL0F2YXRhci9BdmF0YXIuY29tcG9uZW50Lmxlc3MiLCJzcmMvYXBwL3BhZ2VzL015dXNlci9BdmF0YXIvQXZhdGFyLmNvbXBvbmVudC5sZXNzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtFQUNGLFlBQUE7RUFDQSxhQUFBO0FDQ0Y7QURDQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUNDRjtBREVBO0VBQ0UsWUFBQTtFQUNBLGFBQUE7QUNBRjtBREVBO0VBQ0UsZUFBQTtFQUNBLFdBQUE7QUNBRjtBREVBO0VBQ0UsZUFBQTtFQUNBLFdBQUE7QUNBRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL015dXNlci9BdmF0YXIvQXZhdGFyLmNvbXBvbmVudC5sZXNzIiwic291cmNlc0NvbnRlbnQiOlsiLmF2YWltZyB7XG4gICAgbWFyZ2luOiA1MHB4O1xuICB3aWR0aDogMTUwcHg7XG4gIGhlaWdodDogMTUwcHg7XG59XG4uYXZhaW1nIGltZyB7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLmF2YXRhciB7XG4gIHdpZHRoOiAxMjhweDtcbiAgaGVpZ2h0OiAxMjhweDtcbn1cbi51cGxvYWQtaWNvbiB7XG4gIGZvbnQtc2l6ZTogMzJweDtcbiAgY29sb3I6ICM5OTk7XG59XG4uYW50LXVwbG9hZC10ZXh0IHtcbiAgbWFyZ2luLXRvcDogOHB4O1xuICBjb2xvcjogIzY2Njtcbn0iLCIuYXZhaW1nIHtcbiAgbWFyZ2luOiA1MHB4O1xuICB3aWR0aDogMTUwcHg7XG4gIGhlaWdodDogMTUwcHg7XG59XG4uYXZhaW1nIGltZyB7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cbi5hdmF0YXIge1xuICB3aWR0aDogMTI4cHg7XG4gIGhlaWdodDogMTI4cHg7XG59XG4udXBsb2FkLWljb24ge1xuICBmb250LXNpemU6IDMycHg7XG4gIGNvbG9yOiAjOTk5O1xufVxuLmFudC11cGxvYWQtdGV4dCB7XG4gIG1hcmdpbi10b3A6IDhweDtcbiAgY29sb3I6ICM2NjY7XG59XG4iXX0= */\"","import { OnInit, Component } from '@angular/core';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { UploadFile } from 'ng-zorro-antd/upload';\r\nimport { Observable, Observer } from 'rxjs';\r\n@Component({\r\n  selector: 'app-avatar',\r\n  templateUrl: './Avatar.component.html',\r\n  styleUrls: ['./Avatar.component.less']\r\n})\r\nexport class AvatarComponent implements OnInit {\r\n  loading = false;\r\n  avatarUrl: string\r\n\r\n  constructor(private msg: NzMessageService) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  beforeUpload = (file: File) => {\r\n    return new Observable((observer: Observer<boolean>) => {\r\n      const isJPG = file.type !== 'image/bmp\t';\r\n      if (!isJPG) {\r\n        this.msg.error('You can   upload any file  except bmp!');\r\n        observer.complete();\r\n        return;\r\n      }\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      if (!isLt2M) {\r\n        this.msg.error('Image must smaller than 2MB!');\r\n        observer.complete();\r\n        return;\r\n      }\r\n      // check height\r\n      this.checkImageDimension(file).then(dimensionRes => {\r\n        if (!dimensionRes) {\r\n          this.msg.error('Image only 600x600 above');\r\n          observer.complete();\r\n          return;\r\n        }\r\n\r\n        observer.next(isJPG && isLt2M && dimensionRes);\r\n        observer.complete();\r\n      });\r\n    });\r\n  };\r\n\r\n  private getBase64(img: File, callback: (img: string) => void): void {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => callback(reader.result!.toString()));\r\n    reader.readAsDataURL(img);\r\n  }\r\n\r\n  private checkImageDimension(file: File): Promise<boolean> {\r\n\r\n    return new Promise(resolve => {\r\n      const img = new Image(); // create image\r\n      img.src = window.URL.createObjectURL(file);\r\n      img.onload = () => {\r\n        const width = img.naturalWidth;\r\n        const height = img.naturalHeight;\r\n        window.URL.revokeObjectURL(img.src!);\r\n        console.log(width)\r\n        console.log(height)\r\n        console.log(width === height && width >= 600);\r\n        \r\n        resolve(width === height && width >= 600);\r\n      };\r\n    });\r\n  }\r\n\r\n  handleChange(info: { file: UploadFile }): void {\r\n    console.log(info);\r\n    switch (info.file.status) {\r\n      case 'uploading':\r\n        this.loading = true;\r\n        break;\r\n      case 'done':\r\n        // Get this url from response in real world.\r\n        this.getBase64(info.file!.originFileObj!, (img: string) => {\r\n          this.loading = false;\r\n          this.avatarUrl = img;\r\n        });\r\n        break;\r\n      case 'error':\r\n        this.msg.error('Network error');\r\n        this.loading = false;\r\n        break;\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AvatarComponent } from './Avatar/Avatar.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    redirectTo: 'avatar',\r\n    pathMatch: 'full'\r\n  },\r\n  {\r\n    path: 'avatar',\r\n    data: {\r\n      title: '设置头像'\r\n    },\r\n    component: AvatarComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class MyUserRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n// 注册当前路由\r\nimport { MyUserRoutingModule } from './Myuser-routing.module';\r\n// 导入子页面组件\r\nimport { AvatarComponent } from './Avatar/Avatar.component';\r\n// 引入面包屑\r\nimport { SharedModule } from 'src/app/components/shared.module';\r\n\r\n@NgModule({\r\n  declarations: [AvatarComponent],\r\n  imports: [CommonModule, SharedModule],\r\n  exports: [MyUserRoutingModule],\r\n  providers: []\r\n})\r\nexport class MyuserModule {}\r\n"],"sourceRoot":"webpack:///"}