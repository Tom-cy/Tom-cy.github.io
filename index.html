<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Sam</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        * {
            padding: 0;
            margin: 0;
        }

        body {
            width: 100%;
            height: 100%;
            overflow: hidden;

        }

        canvas {
            /* background-color: #000; */
            background-image: url(imgs/0.jpg);
            background-size:contain;
        }
    </style>
</head>

<body>
    <canvas id="canvas"></canvas>

    <script>
        var myCan = document.getElementById("canvas");
        var width = document.documentElement.clientWidth;
        var height = document.documentElement.clientHeight;

        var ctx = canvas.getContext('2d');
        canvas.width = width;
        canvas.height = height;


        ctx.fillStyle = 'aqua';
        ctx.strokeStyle = "rgba(255, 255, 13, .9)";
        ctx.lineWidth = ".3";



        function Star(ctx,x, y, r) {
            this.ctx=ctx;
            this.x = x;
            this.y = y;
            this.r = r;
            this.x_speed = (parseInt(Math.random() * 3) + 1) * Math.pow(-1, parseInt(Math.random() * 10) + 1) / 2;
            this.y_speed = (parseInt(Math.random() * 3) + 1) * Math.pow(-1, parseInt(Math.random() * 10) + 1) / 2;

        }
        Star.prototype.move = function () {
            this.x -= this.x_speed;
            this.y -= this.y_speed;
        }

        // 转向X方法
	Star.prototype.changeX = function() {
		this.x_speed = - this.x_speed;
	}
	// 转向Y方法
	Star.prototype.changeY = function() {
		this.y_speed = - this.y_speed;
	}

        Star.prototype.render = function () {
            this.ctx.beginPath();
            this.ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
            this.ctx.closePath();
            this.ctx.fill();

        }
      

        // 多个星星
        var arr = [];
        for (var i = 0; i < 100; i++) {
            arr.push(new Star(ctx,Math.random() * width, Math.random() * height, 2));
        }
        // 一个星星
        // var star = new Star(ctx, Math.random() * width, Math.random() * height, 2);
        // 创建一个新的星星
        var mouse_star = new Star(ctx, 0, 0, 3);
        document.onmousemove = function (e) {
            var x = e.clientX;
            var y = e.clientY;
            mouse_star.x = x;
            mouse_star.y = y;
        }
        // // 开启定时器
        var timer = setInterval(function () {
            // 清屏
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'white';

            mouse_star.render();

            arr.forEach(function (value, index) {
                
                value.move();
                if (value.x < 0 || value.x > width) {
                    value.changeX();
                }
                if (value.y < 0 || value.y > height) {
                    value.changeY();
                }
                value.render();
            });

            arr.forEach(function (value, index) {
                for (var i = index + 1; i < arr.length; i++) {
                    if (Math.abs(value.x - arr[i].x) < 50 && Math.abs(value.y - arr[i].y) < 50) {
                        // 连线
                        line(value.x, value.y, arr[i].x, arr[i].y);

                    }
                }
                if (Math.abs(value.x - mouse_star.x) < 150 && Math.abs(value.y - mouse_star.y) < 150) {
                    line(value.x, value.y, mouse_star.x, mouse_star.y);
                }
            })


        }, 30)
        


	document.onmousedown = function(e) {
		for (var i = 0; i < 5; i++) {
			arr.push(new Star(ctx,e.clientX, e.clientY, 1));
			arr.shift();
		}
	}


        // 封装函数，传递两个点，绘制两个点之间的线段
        function line(x1, y1, x2, y2) {
            // 开启路径
            ctx.beginPath();
            // 移动画笔到某个位置
            ctx.moveTo(x1, y1);
            // 绘制路径
            ctx.lineTo(x2, y2);
            // 关闭路径
            ctx.closePath();
            // 描边
            ctx.stroke();
        }
    </script>


</body>

</html>